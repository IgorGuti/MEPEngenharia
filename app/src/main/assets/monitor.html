<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8"> <!-- Definir a codificação de caracteres como UTF-8 -->
    <meta name="viewport" content="width=device-width, initial-scale=1.0"> <!-- Configurar viewport para dispositivos móveis -->
    <script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script> <!-- Importar a biblioteca do Google Charts -->
    <script type="text/javascript">
        // Variável para armazenar a instância do gráfico e os dados
        var chart, data;

        // Carrega o pacote Gauge do Google Charts quando uma página é carregada
        google.charts.load('current', {'packages':['gauge']});
        google.charts.setOnLoadCallback(drawChart); // Chama a função drawChart após o carregamento do pacote

        // Função para desenhar o gráfico
        function drawChart() {
            // Define os dados para o gráfico
            data = google.visualization.arrayToDataTable([
                ['Label', 'Value'], // Colunas: Label e Valor
                ['Nível', 0] // Define o rótulo e o valor inicial
            ]);

            // Opções de configuração do gráfico
            var options = {
                width: '100%', // Usa 100% da largura disponível
                height: '100%', // Usa 100% da altura disponível
                redFrom: 0, redTo: 10, // Faixa vermelha
                yellowFrom: 10, yellowTo: 25, // Faixa amarela
                greenFrom: 25, greenTo: 100, // Faixa verde
                minorTicks: 5 // Marcas menores
            };

            // Cria uma instância do gráfico de medidor com o elemento de destino 'chart_div'
            chart = new google.visualization.Gauge(document.getElementById('chart_div'));

            // Desenha o gráfico com os dados e opções definidas
            chart.draw(data, options);
        }

        function updateGauge(value) {
            var currentValue = data.getValue(0, 1); // Valor atual do medidor

            // Função auxiliar para animar o medidor de forma gradual
            function animateGauge(targetValue) {
                if (currentValue < targetValue) {
                    currentValue++;
                } else if (currentValue > targetValue) {
                    currentValue--;
                }
                // Atualiza o medidor com o novo valor
                carregarDados(currentValue);

                // Se não alcançamos o valor alvo, continuamos a animação
                if (currentValue !== targetValue) {
                    setTimeout(function() {
                        animateGauge(targetValue);
                    }, 50); // Ajusta este valor para controlar a velocidade da animação
                }
            }

            // Inicia a animação para o novo valor
            animateGauge(value);
        }
         // Função para atualizar o valor do medidor
        function carregarDados(value) {
            // Define os dados para os gráficos
            data = google.visualization.arrayToDataTable([
                ['Label', 'Value'], // Colunas: Label e Valor
                ['Nível', value] // Define o rótulo e o valor inicial
            ]);

            // Opções de configuração do gráfico
            var options = {
                width: '100%', // Usa 100% da largura disponível
                height: '100%', // Usa 100% da altura disponível
                redFrom: 0, redTo: 10, // Faixa vermelha
                yellowFrom: 10, yellowTo: 25, // Faixa amarela
                greenFrom: 25, greenTo: 100, // Faixa verde
                minorTicks: 5 // Marcas menores
            };

            // Cria uma instância do gráfico de medidor com o elemento de destino 'chart_div'
            chart = new google.visualization.Gauge(document.getElementById('chart_div'));

            // Desenha o gráfico com os dados e opções definidas
            chart.draw(data, options);
        }
    </script>
    <style>
        /* Garantir que os elementos body e html ocupem todo o espaço disponível */
        html, body {
            margin: 0;
            padding: 0;
            height: 100%;
        }
        /* Garantir que #chart_div ocupe todo o espaço disponível */
        #chart_div {
            width: 100%;
            height: 100%;
        }
    </style>
</head>
<body>
<div id="chart_div"></div> <!-- Container para o gráfico -->
<script type="text/javascript">
    // Exemplo de uso da função updateGauge
    // Atualiza o valor do medidor para 50 após 2 segundos
    setTimeout(function() {
        updateGauge(0);
    }, 2000);
</script>
</body>
</html>
